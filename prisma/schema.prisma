generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.1.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Define the Users model
model Users {
  userId             Int      @id @unique @default(autoincrement())
  email              String   @unique
  passwordHash       String?
  firstName          String
  lastName           String
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  profilePicture     String?
  phoneNumber        String?
  hashedRefreshToken String?

  isVerified Boolean  @default(false)
  userType   UserType @default(STUDENT)
  hostel     Hostel?
}

model Hostel {
  hostelId    Int     @id @unique @default(autoincrement())
  name        String
  email       String
  phone       String
  verified    Boolean @default(false)
  genderType  String
  capacity    Int?
  description String?
  slug        String  @unique
  whatsappId  String?
  telegramId  String?
  userId      Int     @unique
  addressId   Int     @unique
  contactId   Int     @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Define a relation to Users
  owner            Users             @relation(fields: [userId], references: [userId])
  address          Address           @relation(fields: [addressId], references: [addressId])
  contact          ContactDetails    @relation(fields: [contactId], references: [contactId])
  // Define relations to other models
  roomAvailability RoomAvailability?
  dailyPricing     DailyPricing?

  socials        Socials?
  MonthlyPricing MonthlyPricing?

  orders    Orders[]
  payments  Payments[]
  gallery   Gallery[]
  suppliers HostelSuppliers[]
}

model HostelFeatures {
  hostelFeatureId Int     @id @unique @default(autoincrement())
  name            String
  emojiUrl        String?
}

model Orders {
  orderId         Int      @id @unique @default(autoincrement())
  productId       Int
  hostelId        Int
  orderNumber     Int
  quantity        Int
  discountPercent Int?
  totalPrice      Float
  createdAt       DateTime @default(now())
  shippingDate    DateTime
  notes           String?

  // Define a relation to Hostel
  hostel Hostel @relation(fields: [hostelId], references: [hostelId])
}

model Product {
  productId   Int      @id @unique @default(autoincrement())
  name        String
  photo       String?
  description String?
  categoryId  Int
  supplierId  Int
  stockSize   Int?
  size        String?
  color       String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Define a relation to Suppliers
  supplier Suppliers @relation(fields: [supplierId], references: [supplierId])
}

model Category {
  categoryId  Int     @id @unique @default(autoincrement())
  name        String
  photo       String?
  description String?
}

model Suppliers {
  supplierId  Int      @id @unique @default(autoincrement())
  name        String
  companyName String?
  addressId   Int
  contactId   Int
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Define a relation to Products
  products Product[]
  hostel   HostelSuppliers[]
}

model HostelSuppliers {
  supplierId         Int      @id @default(autoincrement())
  hostelId   Int
  createdAt  DateTime @default(now())

  hostel   Hostel    @relation(fields: [hostelId], references: [hostelId])
  supplier Suppliers @relation(fields: [supplierId], references: [supplierId])

  @@unique([hostelId, supplierId])
}

model Advertisement {
  adId           Int       @id @unique @default(autoincrement())
  adPlanId       Int       @unique
  startDate      DateTime
  endDate        DateTime?
  createdAt      DateTime  @default(now())
  budgetedAmount Float
  paymentStatus  Boolean

  // Define a relation to AdPlan
  adPlan AdPlan? @relation(fields: [adPlanId], references: [adPlanId])
}

model AdPlan {
  adPlanId      Int            @id @unique @default(autoincrement())
  name          String
  cost          Float
  description   String?
  features      String[]
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  advertisement Advertisement? // One-to-one relationship 
  payments      Payments[]
}

model Payments {
  paymentId Int      @id @unique @default(autoincrement())
  adPlanId  Int
  hostelId  Int
  createdAt DateTime @default(now())

  // Define relations to other models
  adPlan AdPlan @relation(fields: [adPlanId], references: [adPlanId])
  hostel Hostel @relation(fields: [hostelId], references: [hostelId])
}

model MonthlyPricing {
  monthlyPricingId Int      @id @unique @default(autoincrement())
  oneSeater        String?
  twoSeater        String?
  threeSeater      String?
  fourSeater       String?
  fiveSeater       String?
  attachBathroom   String?
  updatedAt        DateTime @updatedAt
  hostelId         Int      @unique

  // Define a relation to Hostel
  hostel Hostel? @relation(fields: [hostelId], references: [hostelId])
}

model DailyPricing {
  dailyPricingId Int      @id @unique @default(autoincrement())
  oneSeater      String?
  twoSeater      String?
  threeSeater    String?
  fourSeater     String?
  fiveSeater     String?
  attachBathroom String?
  updatedAt      DateTime @updatedAt
  hostelId       Int      @unique

  // Define a relation to Hostel
  hostel Hostel? @relation(fields: [hostelId], references: [hostelId])
}

model RoomAvailability {
  roomAvailabilityId Int      @id @unique @default(autoincrement())
  oneSeater          String?
  twoSeater          String?
  threeSeater        String?
  fourSeater         String?
  fiveSeater         String?
  attachBathroom     String?
  updatedAt          DateTime @updatedAt
  hostelId           Int      @unique

  // Define a relation to Hostel
  hostel Hostel? @relation(fields: [hostelId], references: [hostelId])
}

model Gallery {
  galleryId Int     @id @unique @default(autoincrement())
  hostelId  Int
  type      String?
  caption   String?
  url       String

  // Define a relation to Hostel
  hostel Hostel? @relation(fields: [hostelId], references: [hostelId])
}

model Socials {
  socialsId Int     @id @unique @default(autoincrement())
  instaGram String?
  facebook  String?
  tiktok    String?
  map       String?
  youTube   String?
  hostelId  Int     @unique
  hostel    Hostel? @relation(fields: [hostelId], references: [hostelId])

  // Define a relation to Hostel
}

model Address {
  addressId Int      @id @unique @default(autoincrement())
  country   String
  district  String?
  city      String?
  street    String?
  updatedAt DateTime @updatedAt
  hostel    Hostel?
}

model ContactDetails {
  contactId Int      @id @unique @default(autoincrement())
  phone     String
  altPhone  String?
  email     String?
  updatedAt DateTime @updatedAt

  // Define a relation to Hostel
  hostel Hostel?
}

//Enums 
enum UserType {
  STUDENT
  HOSTEL_OWNER
  SUPPLIERS
  OTHERS
}
